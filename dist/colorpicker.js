!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);class o extends n.default{constructor(){super(),this.testColor("111"),this.testColor("a2c843"),this.testColor("123456"),this.testColor("8e2fff")}getRGBCSS(){return`rgb(${this.red}, ${this.green}, ${this.blue})`}getRGBACSS(){return`rgba(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`}testColor(e){console.log("hex",e);const t=this.getRGBfromHEX(e);console.log("rgb",t.red,t.green,t.blue);const r=this.getHSLfromRGB(t);console.log("hsl",r.hue,r.saturation,r.lightness);const n=this.getRGBfromHSL(r);console.log("rgb",n.red,n.green,n.blue);const o=this.getCMYKfromRGB(n);console.log("cmyk",o.cyan,o.magenta,o.yellow,o.key);const s=this.getRGBfromCMYK(o);console.log("rgb",s.red,s.green,s.blue);const i=this.getHEXfromRGB(n);console.log("hex",i),console.log("###########")}}t.default=o;new o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.red=0,this.green=0,this.blue=0,this.alpha=1,this.hex="000000",this.rgb={red:this.red,green:this.green,blue:this.blue},this.rgba=Object.assign({alpha:this.alpha},this.rgb),this.hsl=this.getHSLfromRGB(this.rgb)}updateColorFromRGB(e){return this.red=e.red,this.green=e.green,this.blue=e.blue,this.rgb=e,this.hex=this.getHEXfromRGB(this.rgb),this.hsl=this.getHSLfromRGB(this.rgb),this}updateColorFromHEX(e){const t=this.getRGBfromHEX(e);return this.red=t.red,this.green=t.green,this.blue=t.blue,this.rgb=t,this.hex=e,this.hsl=this.getHSLfromRGB(this.rgb),this}getHEXfromRGB(e){return[Number(e.red).toString(16),Number(e.green).toString(16),Number(e.blue).toString(16)].map(e=>1===e.length?"0"+e:e).join("")}getRGBfromHEX(e){3===(e=e.replace(/^#/,"")).length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const t=parseInt(e,16);return{red:t>>16,green:t>>8&255,blue:255&t}}getHSLfromRGB(e){let t=e.red/255,r=e.green/255,n=e.blue/255,o=Math.min(t,r,n),s=Math.max(t,r,n),i=0,l=0,u=(s+o)/2;return s!==o&&(l=u<.5?(s-o)/(s+o):(s-o)/(2-s-o)),t===s&&r===s&&n===s?i=0:t===s?i=(r-n)/(s-o):r===s?i=2+(n-t)/(s-o):n===s&&(i=4+(t-r)/(s-o)),(i*=60)<0&&(i+=360),{hue:i,saturation:l,lightness:u}}getRGBfromHSL(e){const t=e.hue/60;let r=0;r=e.lightness<=.5?e.lightness*(e.saturation+1):e.lightness+e.saturation-e.lightness*e.saturation;let n=2*e.lightness-r;const o=255*this.hueToRGB(n,r,t+2),s=255*this.hueToRGB(n,r,t),i=255*this.hueToRGB(n,r,t-2);return{red:Math.round(o),green:Math.round(s),blue:Math.round(i)}}getRGBfromCMYK(e){const t=255-255*Math.min(1,e.cyan*(1-e.key)+e.key),r=255-255*Math.min(1,e.magenta*(1-e.key)+e.key),n=255-255*Math.min(1,e.yellow*(1-e.key)+e.key);return{red:Math.round(t),green:Math.round(r),blue:Math.round(n)}}getCMYKfromRGB(e){let t=0,r=0,n=0,o=e.red/255,s=e.green/255,i=e.blue/255,l=1-Math.max(o,s,i);return 1!==l&&(t=(1-o-l)/(1-l),r=(1-s-l)/(1-l),n=(1-i-l)/(1-l)),{cyan:t,magenta:r,yellow:n,key:l}}hueToRGB(e,t,r){return r<0&&(r+=6),r>=6&&(r-=6),r<1?(t-e)*r+e:r<3?t:r<4?(t-e)*(4-r)+e:e}isDark(e=128){return(299*this.red+587*this.green+114*this.blue)/1e3<e}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlbmRlcmVyL2NvbG9ycGlja2VyL2NvbG9ycGlja2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9yZW5kZXJlci9jb2xvcnBpY2tlci9jb2xvci50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImNvbG9yXzEiLCJDb2xvcnBpY2tlciIsImRlZmF1bHQiLCJbb2JqZWN0IE9iamVjdF0iLCJzdXBlciIsInRoaXMiLCJ0ZXN0Q29sb3IiLCJyZWQiLCJncmVlbiIsImJsdWUiLCJhbHBoYSIsImhleCIsImNvbnNvbGUiLCJsb2ciLCJyZ2IiLCJnZXRSR0Jmcm9tSEVYIiwiaHNsIiwiZ2V0SFNMZnJvbVJHQiIsImh1ZSIsInNhdHVyYXRpb24iLCJsaWdodG5lc3MiLCJyZ2IyIiwiZ2V0UkdCZnJvbUhTTCIsImNteWsiLCJnZXRDTVlLZnJvbVJHQiIsImN5YW4iLCJtYWdlbnRhIiwieWVsbG93IiwicmdiMyIsImdldFJHQmZyb21DTVlLIiwiaGV4MiIsImdldEhFWGZyb21SR0IiLCJyZ2JhIiwiYXNzaWduIiwiTnVtYmVyIiwidG9TdHJpbmciLCJtYXAiLCJsZW5ndGgiLCJqb2luIiwicmVwbGFjZSIsImJpbmFyeSIsInBhcnNlSW50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QVFNLEVBQUlOLE1BQVEsSUFDcEJDLEVBQU9LLEVBQUlMLEtBQU8sSUFFbEJsQixFQUFNLEVBQUlvRCxLQUFLQyxJQUFJckMsRUFBS0MsRUFBT0MsR0FRbkMsT0FOWSxJQUFSbEIsSUFDRmtDLEdBQVEsRUFBSWxCLEVBQU1oQixJQUFRLEVBQUlBLEdBQzlCbUMsR0FBVyxFQUFJbEIsRUFBUWpCLElBQVEsRUFBSUEsR0FDbkNvQyxHQUFVLEVBQUlsQixFQUFPbEIsSUFBUSxFQUFJQSxLQUlqQ2tDLEtBQU9BLEVBQ1BDLFFBQVVBLEVBQ1ZDLE9BQVNBLEVBQ1RwQyxJQUFNQSxHQUlGWSxTQUFVMkMsRUFBWUQsRUFBWTNCLEdBSXhDLE9BSElBLEVBQU0sSUFBR0EsR0FBTyxHQUNoQkEsR0FBTyxJQUFHQSxHQUFPLEdBRWpCQSxFQUFNLEdBQVcyQixFQUFLQyxHQUFNNUIsRUFBTTRCLEVBQzdCNUIsRUFBTSxFQUFVMkIsRUFDaEIzQixFQUFNLEdBQVcyQixFQUFLQyxJQUFPLEVBQUk1QixHQUFPNEIsRUFDckNBLEVBR0ozQyxPQUFROEMsRUFBZ0IsS0FFaEMsT0FBcUIsSUFBWDVDLEtBQUtFLElBQXlCLElBQWJGLEtBQUtHLE1BQTBCLElBQVpILEtBQUtJLE1BQWMsSUFBUXdDIiwiZmlsZSI6ImNvbG9ycGlja2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IENvbG9yIGZyb20gJy4vY29sb3InXHJcblxyXG5pbnRlcmZhY2UgUkdCIHtcclxuICByZWQ6IG51bWJlciAvLyAwIC0gMjU1XHJcbiAgZ3JlZW46IG51bWJlciAvLyAwIC0gMjU1XHJcbiAgYmx1ZTogbnVtYmVyIC8vIDAgLSAyNTVcclxufVxyXG5cclxuaW50ZXJmYWNlIFJHQkEgZXh0ZW5kcyBSR0Ige1xyXG4gIGFscGhhOiBudW1iZXIgLy8gMCAtIDFcclxufVxyXG5cclxuaW50ZXJmYWNlIEhTTCB7XHJcbiAgaHVlOiBudW1iZXIgLy8gMCAtIDM2MFxyXG4gIHNhdHVyYXRpb246IG51bWJlciAvLyAwIC0gMTAwXHJcbiAgbGlnaHRuZXNzOiBudW1iZXIgLy8gMCAtIDEwMFxyXG59XHJcblxyXG50eXBlIEhleGFkZWNpbWFsID0gc3RyaW5nXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb2xvcnBpY2tlciBleHRlbmRzIENvbG9yIHtcclxuXHJcbiAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgc3VwZXIoKVxyXG5cclxuICAgIHRoaXMudGVzdENvbG9yKCcxMTEnKVxyXG4gICAgdGhpcy50ZXN0Q29sb3IoJ2EyYzg0MycpXHJcbiAgICB0aGlzLnRlc3RDb2xvcignMTIzNDU2JylcclxuICAgIHRoaXMudGVzdENvbG9yKCc4ZTJmZmYnKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFJHQkNTUyAoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBgcmdiKCR7dGhpcy5yZWR9LCAke3RoaXMuZ3JlZW59LCAke3RoaXMuYmx1ZX0pYFxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldFJHQkFDU1MgKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gYHJnYmEoJHt0aGlzLnJlZH0sICR7dGhpcy5ncmVlbn0sICR7dGhpcy5ibHVlfSwgJHt0aGlzLmFscGhhfSlgXHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgdGVzdENvbG9yIChoZXg6IEhleGFkZWNpbWFsKTogdm9pZCB7XHJcbiAgICBjb25zb2xlLmxvZygnaGV4JywgaGV4KVxyXG4gICAgY29uc3QgcmdiID0gdGhpcy5nZXRSR0Jmcm9tSEVYKGhleClcclxuICAgIGNvbnNvbGUubG9nKCdyZ2InLCByZ2IucmVkLCByZ2IuZ3JlZW4sIHJnYi5ibHVlKVxyXG4gICAgY29uc3QgaHNsID0gdGhpcy5nZXRIU0xmcm9tUkdCKHJnYilcclxuICAgIGNvbnNvbGUubG9nKCdoc2wnLCBoc2wuaHVlLCBoc2wuc2F0dXJhdGlvbiwgaHNsLmxpZ2h0bmVzcylcclxuICAgIGNvbnN0IHJnYjIgPSB0aGlzLmdldFJHQmZyb21IU0woaHNsKVxyXG4gICAgY29uc29sZS5sb2coJ3JnYicsIHJnYjIucmVkLCByZ2IyLmdyZWVuLCByZ2IyLmJsdWUpXHJcbiAgICBjb25zdCBjbXlrID0gdGhpcy5nZXRDTVlLZnJvbVJHQihyZ2IyKVxyXG4gICAgY29uc29sZS5sb2coJ2NteWsnLCBjbXlrLmN5YW4sIGNteWsubWFnZW50YSwgY215ay55ZWxsb3csIGNteWsua2V5KVxyXG4gICAgY29uc3QgcmdiMyA9IHRoaXMuZ2V0UkdCZnJvbUNNWUsoY215aylcclxuICAgIGNvbnNvbGUubG9nKCdyZ2InLCByZ2IzLnJlZCwgcmdiMy5ncmVlbiwgcmdiMy5ibHVlKVxyXG4gICAgY29uc3QgaGV4MiA9IHRoaXMuZ2V0SEVYZnJvbVJHQihyZ2IyKVxyXG4gICAgY29uc29sZS5sb2coJ2hleCcsIGhleDIpXHJcbiAgICBjb25zb2xlLmxvZygnIyMjIyMjIyMjIyMnKVxyXG4gIH1cclxufVxyXG5cclxuY29uc3QgY29sb3JwaWNrZXIgPSBuZXcgQ29sb3JwaWNrZXIoKVxyXG4iLCJpbnRlcmZhY2UgUkdCIHtcclxuICByZWQ6IG51bWJlciAvLyAwIC0gMjU1XHJcbiAgZ3JlZW46IG51bWJlciAvLyAwIC0gMjU1XHJcbiAgYmx1ZTogbnVtYmVyIC8vIDAgLSAyNTVcclxufVxyXG5cclxuaW50ZXJmYWNlIFJHQkEgZXh0ZW5kcyBSR0Ige1xyXG4gIGFscGhhOiBudW1iZXIgLy8gMCAtIDFcclxufVxyXG5cclxuaW50ZXJmYWNlIEhTTCB7XHJcbiAgaHVlOiBudW1iZXIgLy8gMCAtIDM2MFxyXG4gIHNhdHVyYXRpb246IG51bWJlciAvLyAwIC0gMTAwXHJcbiAgbGlnaHRuZXNzOiBudW1iZXIgLy8gMCAtIDEwMFxyXG59XHJcblxyXG5pbnRlcmZhY2UgQ01ZSyB7XHJcbiAgY3lhbjogbnVtYmVyXHJcbiAgbWFnZW50YTogbnVtYmVyXHJcbiAgeWVsbG93OiBudW1iZXJcclxuICBrZXk6IG51bWJlclxyXG59XHJcblxyXG50eXBlIEhleGFkZWNpbWFsID0gc3RyaW5nXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb2xvciB7XHJcbiAgcHJvdGVjdGVkIHJlZDogbnVtYmVyXHJcbiAgcHJvdGVjdGVkIGdyZWVuOiBudW1iZXJcclxuICBwcm90ZWN0ZWQgYmx1ZTogbnVtYmVyXHJcbiAgcHJvdGVjdGVkIGFscGhhOiBudW1iZXJcclxuXHJcbiAgcHJvdGVjdGVkIGhleDogSGV4YWRlY2ltYWxcclxuICBwcm90ZWN0ZWQgcmdiOiBSR0JcclxuICBwcm90ZWN0ZWQgcmdiYTogUkdCQVxyXG4gIHByb3RlY3RlZCBoc2w6IEhTTFxyXG5cclxuICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICB0aGlzLnJlZCA9IDBcclxuICAgIHRoaXMuZ3JlZW4gPSAwXHJcbiAgICB0aGlzLmJsdWUgPSAwXHJcbiAgICB0aGlzLmFscGhhID0gMVxyXG5cclxuICAgIHRoaXMuaGV4ID0gJzAwMDAwMCdcclxuICAgIHRoaXMucmdiID0ge1xyXG4gICAgICByZWQ6IHRoaXMucmVkLFxyXG4gICAgICBncmVlbjogdGhpcy5ncmVlbixcclxuICAgICAgYmx1ZTogdGhpcy5ibHVlXHJcbiAgICB9XHJcbiAgICB0aGlzLnJnYmEgPSB7XHJcbiAgICAgIGFscGhhOiB0aGlzLmFscGhhLFxyXG4gICAgICAuLi50aGlzLnJnYlxyXG4gICAgfVxyXG4gICAgdGhpcy5oc2wgPSB0aGlzLmdldEhTTGZyb21SR0IodGhpcy5yZ2IpXHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgdXBkYXRlQ29sb3JGcm9tUkdCIChyZ2I6IFJHQik6IENvbG9yIHtcclxuICAgIHRoaXMucmVkID0gcmdiLnJlZFxyXG4gICAgdGhpcy5ncmVlbiA9IHJnYi5ncmVlblxyXG4gICAgdGhpcy5ibHVlID0gcmdiLmJsdWVcclxuICAgIHRoaXMucmdiID0gcmdiXHJcbiAgICB0aGlzLmhleCA9IHRoaXMuZ2V0SEVYZnJvbVJHQih0aGlzLnJnYilcclxuICAgIHRoaXMuaHNsID0gdGhpcy5nZXRIU0xmcm9tUkdCKHRoaXMucmdiKVxyXG5cclxuICAgIHJldHVybiB0aGlzXHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgdXBkYXRlQ29sb3JGcm9tSEVYIChoZXg6IEhleGFkZWNpbWFsKTogQ29sb3Ige1xyXG4gICAgY29uc3QgcmdiOiBSR0IgPSB0aGlzLmdldFJHQmZyb21IRVgoaGV4KVxyXG5cclxuICAgIHRoaXMucmVkID0gcmdiLnJlZFxyXG4gICAgdGhpcy5ncmVlbiA9IHJnYi5ncmVlblxyXG4gICAgdGhpcy5ibHVlID0gcmdiLmJsdWVcclxuICAgIHRoaXMucmdiID0gcmdiXHJcbiAgICB0aGlzLmhleCA9IGhleFxyXG4gICAgdGhpcy5oc2wgPSB0aGlzLmdldEhTTGZyb21SR0IodGhpcy5yZ2IpXHJcblxyXG4gICAgcmV0dXJuIHRoaXNcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBnZXRIRVhmcm9tUkdCIChyZ2I6IFJHQik6IEhleGFkZWNpbWFsIHtcclxuICAgIGNvbnN0IGhleCA9IFtcclxuICAgICAgTnVtYmVyKHJnYi5yZWQpLnRvU3RyaW5nKDE2KSxcclxuICAgICAgTnVtYmVyKHJnYi5ncmVlbikudG9TdHJpbmcoMTYpLFxyXG4gICAgICBOdW1iZXIocmdiLmJsdWUpLnRvU3RyaW5nKDE2KVxyXG4gICAgXVxyXG5cclxuICAgIHJldHVybiBoZXhcclxuICAgICAgLm1hcCh2YWx1ZSA9PiB2YWx1ZS5sZW5ndGggPT09IDEgPyAnMCcgKyB2YWx1ZSA6IHZhbHVlKVxyXG4gICAgICAuam9pbignJylcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBnZXRSR0Jmcm9tSEVYIChoZXg6IEhleGFkZWNpbWFsKTogUkdCIHtcclxuICAgIGhleCA9IGhleC5yZXBsYWNlKC9eIy8sICcnKVxyXG4gICAgaWYgKGhleC5sZW5ndGggPT09IDMpIGhleCA9IGhleFswXSArIGhleFswXSArIGhleFsxXSArIGhleFsxXSArIGhleFsyXSArIGhleFsyXVxyXG4gICAgY29uc3QgYmluYXJ5ID0gcGFyc2VJbnQoaGV4LCAxNilcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZWQ6IGJpbmFyeSA+PiAxNixcclxuICAgICAgZ3JlZW46IGJpbmFyeSA+PiA4ICYgMjU1LFxyXG4gICAgICBibHVlOiBiaW5hcnkgJiAyNTVcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBnZXRIU0xmcm9tUkdCIChyZ2I6IFJHQik6IEhTTCB7XHJcbiAgICBsZXQgcmVkID0gcmdiLnJlZCAvIDI1NVxyXG4gICAgbGV0IGdyZWVuID0gcmdiLmdyZWVuIC8gMjU1XHJcbiAgICBsZXQgYmx1ZSA9IHJnYi5ibHVlIC8gMjU1XHJcblxyXG4gICAgbGV0IG1pbiA9IE1hdGgubWluKHJlZCwgZ3JlZW4sIGJsdWUpXHJcbiAgICBsZXQgbWF4ID0gTWF0aC5tYXgocmVkLCBncmVlbiwgYmx1ZSlcclxuXHJcbiAgICBsZXQgaHVlID0gMFxyXG4gICAgbGV0IHNhdHVyYXRpb24gPSAwXHJcbiAgICBsZXQgbGlnaHRuZXNzID0gKG1heCArIG1pbikgLyAyXHJcblxyXG4gICAgaWYgKG1heCAhPT0gbWluKSBzYXR1cmF0aW9uID0gbGlnaHRuZXNzIDwgMC41ID8gKG1heCAtIG1pbikgLyAobWF4ICsgbWluKSA6IChtYXggLSBtaW4pIC8gKDIgLSBtYXggLSBtaW4pXHJcblxyXG4gICAgaWYgKHJlZCA9PT0gbWF4ICYmIGdyZWVuID09PSBtYXggJiYgYmx1ZSA9PT0gbWF4KSBodWUgPSAwXHJcbiAgICBlbHNlIGlmIChyZWQgPT09IG1heCkgaHVlID0gKGdyZWVuIC0gYmx1ZSkgLyAobWF4IC0gbWluKVxyXG4gICAgZWxzZSBpZiAoZ3JlZW4gPT09IG1heCkgaHVlID0gMiArIChibHVlIC0gcmVkKSAvIChtYXggLSBtaW4pXHJcbiAgICBlbHNlIGlmIChibHVlID09PSBtYXgpIGh1ZSA9IDQgKyAocmVkIC0gZ3JlZW4pIC8gKG1heCAtIG1pbilcclxuXHJcbiAgICBodWUgKj0gNjBcclxuICAgIGlmIChodWUgPCAwKSBodWUgKz0gMzYwXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaHVlOiBodWUsIC8vIE1hdGgucm91bmQoaHVlKSxcclxuICAgICAgc2F0dXJhdGlvbjogc2F0dXJhdGlvbiwgLy8gTWF0aC5yb3VuZChzYXR1cmF0aW9uICogMTAwKSxcclxuICAgICAgbGlnaHRuZXNzOiBsaWdodG5lc3MgLy8gTWF0aC5yb3VuZChsaWdodG5lc3MgKiAxMDApXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgZ2V0UkdCZnJvbUhTTCAoaHNsOiBIU0wpOiBSR0Ige1xyXG4gICAgY29uc3QgaHVlID0gaHNsLmh1ZSAvIDYwXHJcbiAgICBsZXQgdDIgPSAwXHJcblxyXG4gICAgaWYgKGhzbC5saWdodG5lc3MgPD0gMC41KSB0MiA9IGhzbC5saWdodG5lc3MgKiAoaHNsLnNhdHVyYXRpb24gKyAxKVxyXG4gICAgZWxzZSB0MiA9IGhzbC5saWdodG5lc3MgKyBoc2wuc2F0dXJhdGlvbiAtIChoc2wubGlnaHRuZXNzICogaHNsLnNhdHVyYXRpb24pXHJcbiAgICBsZXQgdDEgPSBoc2wubGlnaHRuZXNzICogMiAtIHQyXHJcblxyXG4gICAgY29uc3QgcmVkID0gdGhpcy5odWVUb1JHQih0MSwgdDIsIGh1ZSArIDIpICogMjU1XHJcbiAgICBjb25zdCBncmVlbiA9IHRoaXMuaHVlVG9SR0IodDEsIHQyLCBodWUpICogMjU1XHJcbiAgICBjb25zdCBibHVlID0gdGhpcy5odWVUb1JHQih0MSwgdDIsIGh1ZSAtIDIpICogMjU1XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmVkOiBNYXRoLnJvdW5kKHJlZCksXHJcbiAgICAgIGdyZWVuOiBNYXRoLnJvdW5kKGdyZWVuKSxcclxuICAgICAgYmx1ZTogTWF0aC5yb3VuZChibHVlKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGdldFJHQmZyb21DTVlLIChjbXlrOiBDTVlLKTogUkdCIHtcclxuICAgIGNvbnN0IHJlZCA9IDI1NSAtICgoTWF0aC5taW4oMSwgY215ay5jeWFuICogKDEgLSBjbXlrLmtleSkgKyBjbXlrLmtleSkpICogMjU1KVxyXG4gICAgY29uc3QgZ3JlZW4gPSAyNTUgLSAoKE1hdGgubWluKDEsIGNteWsubWFnZW50YSAqICgxIC0gY215ay5rZXkpICsgY215ay5rZXkpKSAqIDI1NSlcclxuICAgIGNvbnN0IGJsdWUgPSAyNTUgLSAoKE1hdGgubWluKDEsIGNteWsueWVsbG93ICogKDEgLSBjbXlrLmtleSkgKyBjbXlrLmtleSkpICogMjU1KVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJlZDogTWF0aC5yb3VuZChyZWQpLFxyXG4gICAgICBncmVlbjogTWF0aC5yb3VuZChncmVlbiksXHJcbiAgICAgIGJsdWU6IE1hdGgucm91bmQoYmx1ZSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBnZXRDTVlLZnJvbVJHQiAocmdiOiBSR0IpOiBDTVlLIHtcclxuICAgIGxldCBjeWFuID0gMFxyXG4gICAgbGV0IG1hZ2VudGEgPSAwXHJcbiAgICBsZXQgeWVsbG93ID0gMFxyXG5cclxuICAgIGxldCByZWQgPSByZ2IucmVkIC8gMjU1XHJcbiAgICBsZXQgZ3JlZW4gPSByZ2IuZ3JlZW4gLyAyNTVcclxuICAgIGxldCBibHVlID0gcmdiLmJsdWUgLyAyNTVcclxuXHJcbiAgICBsZXQga2V5ID0gMSAtIE1hdGgubWF4KHJlZCwgZ3JlZW4sIGJsdWUpXHJcblxyXG4gICAgaWYgKGtleSAhPT0gMSkge1xyXG4gICAgICBjeWFuID0gKDEgLSByZWQgLSBrZXkpIC8gKDEgLSBrZXkpXHJcbiAgICAgIG1hZ2VudGEgPSAoMSAtIGdyZWVuIC0ga2V5KSAvICgxIC0ga2V5KVxyXG4gICAgICB5ZWxsb3cgPSAoMSAtIGJsdWUgLSBrZXkpIC8gKDEgLSBrZXkpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY3lhbiA6IGN5YW4sXHJcbiAgICAgIG1hZ2VudGEgOiBtYWdlbnRhLFxyXG4gICAgICB5ZWxsb3cgOiB5ZWxsb3csXHJcbiAgICAgIGtleSA6IGtleVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBodWVUb1JHQiAodDE6IG51bWJlciwgdDI6IG51bWJlciwgaHVlOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgaWYgKGh1ZSA8IDApIGh1ZSArPSA2XHJcbiAgICBpZiAoaHVlID49IDYpIGh1ZSAtPSA2XHJcblxyXG4gICAgaWYgKGh1ZSA8IDEpIHJldHVybiAodDIgLSB0MSkgKiBodWUgKyB0MVxyXG4gICAgZWxzZSBpZiAoaHVlIDwgMykgcmV0dXJuIHQyXHJcbiAgICBlbHNlIGlmIChodWUgPCA0KSByZXR1cm4gKHQyIC0gdDEpICogKDQgLSBodWUpICsgdDFcclxuICAgIGVsc2UgcmV0dXJuIHQxXHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgaXNEYXJrIChsaW1pdDogbnVtYmVyID0gMTI4KTogYm9vbGVhbiB7XHJcblxyXG4gICAgcmV0dXJuICgoKHRoaXMucmVkICogMjk5ICsgdGhpcy5ncmVlbiAqIDU4NyArIHRoaXMuYmx1ZSAqIDExNCkgLyAxMDAwKSA8IGxpbWl0KVxyXG4gIH1cclxuXHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==